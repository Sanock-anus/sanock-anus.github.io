<!DOCTYPE html>
<html lang="ru">
<head>
    <meta name="yandex-verification" content="0ff9479251bdef9d" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–ê–•‚öôÔ∏è–í–ò–ö & GAME MEF</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

    <style>
        /* –û–°–ù–û–í–ù–û–ô –°–¢–ò–õ–¨ */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0; padding: 0;
            background-color: #1a1a1a;
            color: #ecf0f1;
            overflow-x: hidden;
        }

        header {
            background-color: #1a1a1a;
            padding: 1rem 0;
            position: fixed; width: 100%; top: 0; z-index: 1000;
            border-bottom: 2px solid #e67e22;
        }

        nav {
            display: flex; justify-content: space-between; align-items: center;
            max-width: 1200px; margin: 0 auto; padding: 0 2rem;
        }

        .logo-img { height: 40px; width: auto; margin-right: 10px; }
        nav ul { list-style: none; display: flex; gap: 1.5rem; }
        nav a { color: #ecf0f1; text-decoration: none; font-weight: bold; }

        .section { padding: 100px 2rem; max-width: 1200px; margin: 0 auto; }

                <section id="about" class="section">

            <div class="container">

                <h2>–û –Ω–∞—Å</h2>

                <div class="about-content">

                    <div class="about-text">

                        <p>–ú–ê–•‚öôÔ∏è–í–ò–ö & GAME MEF ‚Äî —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ —ç–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤, —É–≤–ª–µ—á–µ–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏–≥—Ä. –ú—ã –≤–µ—Ä–∏–º, —á—Ç–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –∫–∞–∂–¥–æ–º—É.</p>

                    </div>

                    <div class="about-logo">

                        <img src="–ú–ê–•‚öôÔ∏è–í–ò–öANDGAMEMEF.png" alt="–ú–ê–•‚öôÔ∏è–í–ò–ö –∏ GAME MEF" style="max-width: 300px; border-radius: 10px;">

                    </div>

                </div>

            </div>

        </section>
        
        /* –ö–ê–†–¢–û–ß–ö–ê –ò–ì–†–´ (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è) */
        .game-showcase { display: flex; justify-content: center; padding: 20px; }
        .game-card { 
            background: #2c3e50; 
            padding: 30px; 
            border-radius: 20px; 
            border: 2px solid #e67e22;
            max-width: 800px; 
            width: 100%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .game-card img { width: 100%; border-radius: 15px; margin-bottom: 20px; }

        /* –ò–ù–¢–ï–†–§–ï–ô–° –ë–ï–ó WINDOWS 95 (–¢–µ–º–Ω—ã–π –∏ —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π) */
        input, textarea {
            background: #333 !important;
            color: #fff !important;
            border: 1px solid #444 !important;
            border-radius: 10px !important;
            padding: 12px !important;
            outline: none !important;
            box-sizing: border-box;
        }

        button {
            background: #34495e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        button:hover { background: #e67e22; transform: translateY(-2px); }

        /* –°–û–û–ë–©–ï–°–¢–í–û */
        #auth-box {
            background: rgba(44, 62, 80, 0.8);
            padding: 25px;
            border-radius: 20px;
            border: 1px solid #3498db;
            margin-bottom: 25px;
        }

        .post {
            background: #2c3e50;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #e67e22;
            text-align: left;
        }

        .reply-block {
            margin-left: 30px;
            border-left: 2px dashed #e67e22;
            padding-left: 15px;
            margin-top: 15px;
        }

        /* –õ–∞–π–∫–∏ (–ê–∫—Ç–∏–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞) */
        .vote-active-up { color: #2ecc71 !important; background: rgba(46, 204, 113, 0.1); }
        .vote-active-down { color: #e74c3c !important; background: rgba(231, 76, 60, 0.1); }

        .cta-button {
            display: inline-block; background-color: #e67e22; color: #fff;
            padding: 1rem 2rem; text-decoration: none; border-radius: 50px;
            font-weight: bold; margin-top: 1rem;
        }

        @keyframes fall { to { transform: translateY(105vh); } }
    </style>
</head>
<body>

    <header>
        <nav>
            <div class="logo">
                <img src="–ú–ê–•‚öôÔ∏è–í–ò–ö.png" alt="–õ–æ–≥–æ" class="logo-img">
                <img src="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ WhatsApp 2025-08-28 –≤ 22.16.06_5d40c46f.jpg" alt="Logo 2" class="logo-img">
            </div>
            <ul>
                <li><a href="#games">–ù–∞—à–∏ –∏–≥—Ä—ã</a></li>
                <li><a href="#community">–°–æ–æ–±—â–µ—Å—Ç–≤–æ</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="hero" style="height: 60vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
            <h1>–ú–ê–•‚öôÔ∏è–í–ò–ö & GAME MEF</h1>
            <div class="dl-counter" style="font-size: 1.5rem; color: #e67e22;">
                üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–π: <span id="count-number">0</span>
            </div>
        </section>

        <section id="games" class="section">
            <h2 style="text-align:center;">–ù–∞—à–∏ –∏–≥—Ä—ã</h2>
            <div class="game-showcase">
                <div class="game-card">
                    <img src="Game.jpg" alt="5 –Ω–æ—á–µ–π –≤ —à–∞—Ä–∞–≥–µ">
                    <h3>5 –Ω–æ—á–µ–π –≤ —à–∞—Ä–∞–≥–µ</h3>
                    <p>–î–æ—Å—Ç—É–ø–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö!</p>
                    <div style="display:flex; gap:20px; justify-content:center; flex-wrap: wrap;">
                        <a href="https://drive.google.com/file/d/1DpQU2blWeWgafjGmtvx7WU4kW8iIUcTY/view" class="cta-button" onclick="countDl()">–ü–ö</a>
                        <a href="https://drive.google.com/file/d/1a0cGmqNwIjfC5tUsAgG4hSO4xOG0aSYf/view" class="cta-button" onclick="countDl()">Android</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="community" class="section">
            <div class="container">
                <h2>–°–æ–æ–±—â–µ—Å—Ç–≤–æ ‚ùÑÔ∏è</h2>
                
                <div id="auth-box">
                    <div id="user-info" style="display:none; margin-bottom:15px;">
                        –í—ã –≤–æ—à–ª–∏ –∫–∞–∫: <strong id="current-user-display" style="color:#3498db;"></strong> 
                        <button onclick="logout()" style="background:#e74c3c; margin-left:15px;">–í—ã–π—Ç–∏</button>
                    </div>
                    <div id="auth-forms" style="display: flex; flex-wrap: wrap; gap: 10px;">
                        <input type="text" id="c-name" placeholder="–ù–∏–∫–Ω–µ–π–º" style="flex: 1; min-width: 200px;">
                        <input type="email" id="c-email" placeholder="–ü–æ—á—Ç–∞" style="flex: 1; min-width: 200px;">
                        <input type="password" id="c-pass" placeholder="–ü–∞—Ä–æ–ª—å" style="flex: 1; min-width: 200px;">
                        <div style="width: 100%; display: flex; gap: 10px;">
                            <button onclick="register()" style="background:#2ecc71; flex: 1;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                            <button onclick="login()" style="background:#3498db; flex: 1;">–í–æ–π—Ç–∏</button>
                        </div>
                    </div>
                </div>

                <div id="msg-input-area" style="display:none; margin-bottom:30px;">
                    <textarea id="c-msg" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ YouTube..." style="width:100%; height:100px; margin-bottom: 10px;"></textarea>
                    <button id="send-msg" class="cta-button" style="width:100%; border: none;">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                </div>
                
                <div id="posts-wall">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π...</div>
            </div>
        </section>
    </main>

    <script>
        // FIREBASE –ö–û–ù–§–ò–ì
        const firebaseConfig = {
            apiKey: "AIzaSyBcQP8-B9zt_dKdj2Ns99H6aaqzQb8OnLc",
            authDomain: "makhovicksite.firebaseapp.com",
            projectId: "makhovicksite",
            storageBucket: "makhovicksite.firebasestorage.app",
            messagingSenderId: "245142284614",
            appId: "1:245142284614:web:fd01f94ef372ebc0ad1d47",
            databaseURL: "https://makhovicksite-default-rtdb.firebaseio.com"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();

        let currentUser = null;

        // AUTH –§–£–ù–ö–¶–ò–ò
        function register() {
            const e = document.getElementById('c-email').value;
            const p = document.getElementById('c-pass').value;
            const n = document.getElementById('c-name').value;
            if(!n) return alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫!");
            auth.createUserWithEmailAndPassword(e, p)
                .then(res => res.user.updateProfile({displayName: n}))
                .catch(a => alert("–û—à–∏–±–∫–∞: " + a.message));
        }

        function login() {
            auth.signInWithEmailAndPassword(
                document.getElementById('c-email').value, 
                document.getElementById('c-pass').value
            ).catch(a => alert("–û—à–∏–±–∫–∞: " + a.message));
        }

        function logout() { auth.signOut(); }

        auth.onAuthStateChanged(user => {
            currentUser = user;
            document.getElementById('auth-forms').style.display = user ? 'none' : 'flex';
            document.getElementById('user-info').style.display = user ? 'block' : 'none';
            document.getElementById('msg-input-area').style.display = user ? 'block' : 'none';
            if(user) document.getElementById('current-user-display').innerText = user.displayName;
        });

        // –ü–ê–†–°–ò–ù–ì –í–ò–î–ï–û
        function parseVideo(t) {
            const m = t.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
            return m ? `<br><iframe width="100%" height="350" src="https://www.youtube.com/embed/${m[1]}" frameborder="0" allowfullscreen style="margin-top:15px; border-radius:10px;"></iframe>` : "";
        }

        // –õ–ê–ô–ö–ò
        window.toggleVote = function(path, type) {
            if(!currentUser) return alert("–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç!");
            const ref = db.ref(path + '/votes/' + currentUser.uid);
            ref.once('value', s => s.val() === type ? ref.remove() : ref.set(type));
        };

        // –û–¢–í–ï–¢–´
        window.sendReply = function(parentId, targetName) {
            const t = document.getElementById('r-msg-' + parentId).value;
            if(t && currentUser) {
                db.ref(`posts/${parentId}/replies`).push({
                    uid: currentUser.uid,
                    n: currentUser.displayName,
                    t: `@${targetName}, ${t}`,
                    time: new Date().toLocaleString()
                });
                document.getElementById('r-msg-' + parentId).value = '';
            }
        };

        window.openReply = function(id) {
            const el = document.getElementById('re-form-' + id);
            el.style.display = el.style.display === 'none' ? 'block' : 'none';
        };

        // –ì–õ–ê–í–ù–´–ô –ü–û–°–¢
        document.getElementById('send-msg').onclick = () => {
            const t = document.getElementById('c-msg').value;
            if(t && currentUser) {
                db.ref('posts').push({ 
                    uid: currentUser.uid, 
                    n: currentUser.displayName, 
                    t, 
                    time: new Date().toLocaleString() 
                });
                document.getElementById('c-msg').value = '';
            }
        };

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–¢–ï–ù–´
        db.ref('posts').on('value', snap => {
            const wall = document.getElementById('posts-wall');
            wall.innerHTML = '';
            const data = snap.val();
            if(!data) { wall.innerHTML = "–°–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç..."; return; }
            
            for(let id in data) {
                const p = data[id];
                const votes = p.votes || {};
                const up = Object.values(votes).filter(v => v === 'up').length;
                const down = Object.values(votes).filter(v => v === 'down').length;
                const myV = currentUser ? votes[currentUser.uid] : null;

                let html = `
                    <div class="post">
                        <strong style="color: #e67e22; font-size: 1.1rem;">${p.n}</strong> 
                        <small style="opacity:0.5; margin-left: 10px;">${p.time}</small>
                        <p style="margin: 15px 0;">${p.t}${parseVideo(p.t)}</p>
                        <div style="display:flex; gap:10px;">
                            <button onclick="toggleVote('posts/${id}', 'up')" class="${myV==='up'?'vote-active-up':''}">üëç ${up}</button>
                            <button onclick="toggleVote('posts/${id}', 'down')" class="${myV==='down'?'vote-active-down':''}">üëé ${down}</button>
                            <button onclick="openReply('${id}')" style="background: transparent; border: 1px solid #3498db;">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                        </div>
                        <div id="re-form-${id}" style="display:none; margin-top:15px;">
                            <textarea id="r-msg-${id}" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç..." style="width:100%; height:60px;"></textarea>
                            <button onclick="sendReply('${id}', '${p.n}')" style="margin-top:5px; background:#2ecc71; width: 100%;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        </div>
                        <div class="reply-block">
                `;

                if(p.replies) {
                    for(let rid in p.replies) {
                        const r = p.replies[rid];
                        const rVotes = r.votes || {};
                        const rUp = Object.values(rVotes).filter(v => v === 'up').length;
                        const rDown = Object.values(rVotes).filter(v => v === 'down').length;
                        const myRV = currentUser ? rVotes[currentUser.uid] : null;

                        html += `
                            <div style="margin-bottom:15px; padding:10px; background:rgba(255,255,255,0.03); border-radius:10px;">
                                <strong style="color: #3498db;">${r.n}</strong>: ${r.t}
                                <div style="display:flex; gap:10px; margin-top:10px; font-size:0.8em;">
                                    <button onclick="toggleVote('posts/${id}/replies/${rid}', 'up')" class="${myRV==='up'?'vote-active-up':''}" style="padding: 3px 8px;">üëç ${rUp}</button>
                                    <button onclick="toggleVote('posts/${id}/replies/${rid}', 'down')" class="${myRV==='down'?'vote-active-down':''}" style="padding: 3px 8px;">üëé ${rDown}</button>
                                    <button onclick="openReply('${id}')" style="padding: 3px 8px; background: transparent;">–û—Ç–≤–µ—Ç–∏—Ç—å –µ—â—ë</button>
                                </div>
                            </div>
                        `;
                    }
                }
                html += `</div></div>`;
                wall.insertAdjacentHTML('afterbegin', html);
            }
        });

        // –°–ß–Å–¢–ß–ò–ö –ò –°–ù–ï–ì
        const countRef = db.ref('downloads/total');
        countRef.on('value', s => document.getElementById('count-number').innerText = s.val() || 0);
        function countDl() { countRef.transaction(c => (c || 0) + 1); }

        setInterval(() => {
            const s = document.createElement('div');
            s.innerHTML = '‚ùÑ';
            s.style.cssText = `position:fixed; top:-20px; color:white; pointer-events:none; left:${Math.random()*100}vw; animation: fall ${Math.random()*3+2}s linear forwards; z-index:9999;`;
            document.body.appendChild(s);
            setTimeout(() => s.remove(), 5000);
        }, 300);
    </script>
</body>
</html>

